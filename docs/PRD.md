# Credit Card Optimizer PWA - Product Requirements Document (PRD)

## 1. 產品概述 (Product Overview)
本產品為一款專為 iPhone 設計的免安裝 Web App (PWA)。旨在協助使用者在消費時，能根據手邊持有的信用卡、當下的消費場景以及信用卡回饋上限，快速找出回饋最高的信用卡，並記錄消費以自動追蹤回饋進度。

## 2. 目標受眾 (Target Audience)
- 擁有多張信用卡，希望最大化回饋的使用者。
- 使用 iPhone，但不希望安裝繁重 App 的使用者。
- 需要追蹤信用卡回饋上限（如：每月上限 300 元）的使用者。

## 3. 核心功能需求 (Key Functional Requirements)

### 3.1 初始設定 (Onboarding & Setup)
- **信用卡選擇**：使用者首次進入 App 時，可從內建的信用卡資料庫中勾選自己擁有的信用卡。
- **結帳週期設定**：針對每張持有的信用卡，使用者可設定「結帳日」或「週期起算日」（用於重置回饋上限）。

### 3.2 智慧推薦 (Smart Recommendation)
- **情境選擇**：首頁提供常見消費情境選單（如：一般消費、超商、加油、網購、餐廳、日本旅遊等）或地點輸入。
- **即時排序**：系統根據使用者持有的信用卡、該情境的回饋率、以及「目前已累積的回饋金額/上限」，計算當下最佳回饋卡片並排序。
- **回饋上限考量**：若某張高回饋卡片已達回饋上限，系統應將其降權或標示「已達上限」，並推薦次佳卡片。

### 3.3 記帳與追蹤 (Recording & Tracking)
- **消費記錄**：使用者在推薦頁面選定卡片後，可輸入金額並確認「刷卡」，系統將記錄該筆消費。
- **即時扣額**：記錄後，該卡片在本週期的「累積回饋額」應即時更新，影響下一次的推薦排序。

### 3.4 系統內建資料 (Built-in Data)
- **信用卡資料庫**：App 需內建市面常見信用卡的基礎回饋率、特殊通路回饋率、回饋上限（金額或點數）、回饋週期規則。

## 4. User Stories (使用者故事)

| ID | 角色 | 故事內容 | 驗收標準 (Acceptance Criteria) |
|----|------|----------|--------------------------------|
| US-01 | 使用者 | 我想要勾選我擁有的信用卡並設定結帳日 | 1. 列表顯示內建信用卡<br>2. 可設定每張卡的結帳日<br>3. 資料需儲存在本地 |
| US-02 | 使用者 | 我想要選擇「便利商店」情境，知道哪張卡回饋最多 | 1. 點擊便利商店圖示<br>2. 列表顯示持有卡片，按回饋率由高到低排序<br>3. 顯示預估回饋 % 數 |
| US-03 | 使用者 | 我想要記錄一筆 $500 的消費，以便追蹤回饋上限 | 1. 在推薦卡片列表點擊「記帳」<br>2. 輸入金額 $500<br>3. 確認後，該卡片剩餘回饋額度減少 |
| US-04 | 使用者 | 當某張卡回饋已滿時，系統不要推薦它 | 1. 模擬某卡累積回饋已達上限<br>2. 再次搜尋時，該卡顯示「已滿」或排至後方<br>3. 推薦第二高回饋的卡片 |
| US-05 | 使用者 | 我希望在 iPhone 上像 App 一樣使用，不需要一直登入 | 1. 支援 iOS Safari "Add to Home Screen"<br>2. 開啟後全螢幕顯示 (standalone mode)<br>3. 關閉後再打開，資料仍然存在 |

## 5. 非功能需求 (Non-Functional Requirements)
- **PWA 支援**：需包含 `manifest.json` 與 Service Worker，支援離線開啟（至少能讀取快取資料）。
- **本地儲存**：因無後端伺服器要求，所有使用者設定與交易紀錄優先儲存於 `IndexedDB` 或 `localStorage`。
- **隱私**：所有財務數據不傳輸至外部伺服器。
- **效能**：啟動時間需在 2 秒內 (First Contentful Paint)。

## 6. 未來擴充 (Out of Scope for V1)
- OCR 掃描帳單自動記帳。
- 銀行帳戶連動。
- 雲端備份/跨裝置同步。
